# Executive Summary
For this assignment, we’re working with special varieties of stored programs, including a transaction, a trigger, and an event. I’m going to create a procedure that performs a transaction to avoid concurrency problems, I’m going to create a trigger object that reacts when we try to perform particular UPDATE operations, and finally I’m going to create an event object and schedule it to fire at some time in future.

# Stored Programs
The first task is to describe a stored program for deleting a customer from the customers table. I will create a procedure called remove_customer that accepts one INT parameter that is the customer_id that we want to remove (the parameter will be used in a DELETE statement to target the customer with that ID number). I’m going to implement the material I’ve learned in Chapter 14 and use the START TRANSACTION statement before the DELETE statement occurs so that I can decide whether to COMMIT or ROLLBACK afterward and output the appropriate message for the user. Furthermore, our textbook explains that phantom reads may occur if multiple transactions are performing UPDATE or DELETE operations with the same data. Therefore, since our transaction involves a DELETE operation and SERIALIZABLE is the only isolation level that can prevent phantom reads, I think it is warranted to use it here. I’d like to include an IF EXISTS clause to let the user know if the specified customer does not exist. If it does exist, we can continue with the deletion process. The book explains that the FOR UPDATE keywords can be added to a SELECT statement to prevent others from reading and writing to our selected data while we’re working with it. I think that will be appropriate for our situation. I’ve created a script and screenshot of the procedure and uploaded the files as “Assignment7No1”.

Note: I’m going to upload task 2 files with the naming convention “Assignment7No2”.

The second task is to create a trigger for the products table that fires when an UPDATE operation happens. The trigger should produce an error if the UPDATE tries to set the unit_price to a value that’s greater than 1200 or less than 100. To do this, we’ll use the BEFORE UPDATE keywords, an IF statement to check the value that’s being assigned, and the SIGNAL SQLSTATE HY000 statement to produce the error message. By the way, we are able to check the value that’s being assigned by using the NEW keyword. I want to test the trigger, but I don’t want to interfere with data that’s currently in the database. So, I’m going to use an INSERT statement to add a new product (a new row) called “Kevin’s Drums”, which will be product 11. Now we can test the trigger by using an UPDATE statement to modify the list_price of Kevin’s Drums to different values. The trigger works properly by producing an error message if I try to update the price to a value that’s greater than 1200 or less than 100.

For the third task, I chose to do task B, which asks us to make an event and work with the event scheduler. First, we’ll turn on the event scheduler by setting the variable with the SET GLOBAL command, and then we’ll confirm that it’s on with the SHOW VARIABLES command (AssignmentNo3a). Next, we’ll create an event and schedule it to happen exactly one day from now. We can do that by using the ON SCHEDULE AT command followed by NOW() + INTERVAL 1 DAY. The NOW function returns the current time and date, so we are adding 1 day to that value to get the time we want. After I create the event, I’m going to show the scheduled events with the SHOW EVENTS command to confirm that the event has been added to the events list (AssignmentNo3b). Finally, we’ll make a script that removes the event from the list, and shows the list again so that we can confirm that it has been removed (AssignmentNo3c).

# Conclusion
I enjoy working with stored programs, so I enjoyed this assignment. I think triggers, events, and the events scheduler are pretty easy to work with. However, I think the concepts of transactions and concurrency in task one are a bit more difficult to understand. I still enjoyed doing task one, and I felt pretty confident as I worked on it, but I think I will need more practice to fully understand the dynamics and significance of those concepts and techniques. So I look forward to learning more about it in the future.
